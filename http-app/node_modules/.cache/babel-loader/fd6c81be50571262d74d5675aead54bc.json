{"ast":null,"code":"var _jsxFileName = \"D:\\\\Workspaces\\\\react\\\\http-app\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport http from \"./services/httpService\";\nimport config from \"./config.json\";\nimport { ToastContainer } from \"react-toastify\"; //import \"react-toastify/dist/ReactToastify.css\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: []\n    };\n\n    this.handleAdd = async () => {\n      const obj = {\n        title: \"a\",\n        body: \"b\"\n      };\n      const {\n        data: post\n      } = await http.post(config.apiEndpoint, obj);\n      const posts = [post, ...this.state.posts];\n      this.setState({\n        posts\n      });\n      console.log(post);\n    };\n\n    this.handleUpdate = async post => {\n      post.title = \"Updated\";\n      await http.put(config.apiEndpoint + \"/\" + post.id, post);\n      const posts = [...this.state.posts];\n      const index = posts.indexOf(post);\n      posts[index] = { ...post\n      };\n      this.setState({\n        posts\n      });\n      console.log(\"Update\", post);\n    };\n\n    this.handleDelete = async post => {\n      const originalPosts = this.state.posts;\n      const posts = this.state.posts.filter(p => p.id !== post.id);\n      this.setState({\n        posts\n      });\n\n      try {\n        await http.delete(config.apiEndpoint + \"/\" + post.id); //for stimulating error only\n        //throw new Error(\"\");\n      } catch (ex) {\n        if (ex.response && ex.response.status === 404) alert(\"This post has already been deleted.\");\n        this.setState({\n          posts: originalPosts\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      data: posts\n    } = await http.get(config.apiEndpoint);\n    this.setState({\n      posts\n    });\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.handleAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Add\"), React.createElement(\"table\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Delete\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, this.state.posts.map(post => React.createElement(\"tr\", {\n      key: post.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, post.title), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-info btn-sm\",\n      onClick: () => this.handleUpdate(post),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Update\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-danger btn-sm\",\n      onClick: () => this.handleDelete(post),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Delete\")))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Workspaces/react/http-app/src/App.js"],"names":["React","Component","http","config","ToastContainer","App","state","posts","handleAdd","obj","title","body","data","post","apiEndpoint","setState","console","log","handleUpdate","put","id","index","indexOf","handleDelete","originalPosts","filter","p","delete","ex","response","status","alert","componentDidMount","get","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport http from \"./services/httpService\";\r\nimport config from \"./config.json\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n//import \"react-toastify/dist/ReactToastify.css\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    posts: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { data: posts } = await http.get(config.apiEndpoint);\r\n    this.setState({ posts });\r\n  }\r\n\r\n  handleAdd = async () => {\r\n    const obj = { title: \"a\", body: \"b\" };\r\n    const { data: post } = await http.post(config.apiEndpoint, obj);\r\n\r\n    const posts = [post, ...this.state.posts];\r\n    this.setState({ posts });\r\n    console.log(post);\r\n  };\r\n\r\n  handleUpdate = async post => {\r\n    post.title = \"Updated\";\r\n    await http.put(config.apiEndpoint + \"/\" + post.id, post);\r\n    const posts = [...this.state.posts];\r\n    const index = posts.indexOf(post);\r\n    posts[index] = { ...post };\r\n    this.setState({ posts });\r\n\r\n    console.log(\"Update\", post);\r\n  };\r\n\r\n  handleDelete = async post => {\r\n    const originalPosts = this.state.posts;\r\n\r\n    const posts = this.state.posts.filter(p => p.id !== post.id);\r\n    this.setState({ posts });\r\n\r\n    try {\r\n      await http.delete(config.apiEndpoint + \"/\" + post.id);\r\n      //for stimulating error only\r\n      //throw new Error(\"\");\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404)\r\n        alert(\"This post has already been deleted.\");\r\n      this.setState({ posts: originalPosts });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <ToastContainer />\r\n        <button className=\"btn btn-primary\" onClick={this.handleAdd}>\r\n          Add\r\n        </button>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Title</th>\r\n              <th>Update</th>\r\n              <th>Delete</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.posts.map(post => (\r\n              <tr key={post.id}>\r\n                <td>{post.title}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-info btn-sm\"\r\n                    onClick={() => this.handleUpdate(post)}\r\n                  >\r\n                    Update\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-danger btn-sm\"\r\n                    onClick={() => this.handleDelete(post)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}